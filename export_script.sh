#!/bin/bash

# Prompt user, and read command line argument
# Find the room IP
read -p "What is the IP address of the room? " IPAnswer

# Find the new room name and path
read -p "What is the name of the room? " roomAnswer

# Check if user is running AttackBox or OpenVPN
while true; do
  read -p "Are you using OpenVPN or AttackBox? ([O]penVPN / [A]ttackBox) " OA
  case $OA in
    [Oo]* )
      dir="../rooms/${roomAnswer}";
      rock="~/Projects/tryhackme/THM-pentest/wordlists/rockyou.txt"
      medium="~/Projects/tryhackme/THM-pentest/wordlists/medium.txt"
      # Find the home IP
      read -p "What is the IP address of the room? " IPHome
      home=$IPHome
      break;;
    [Aa]* )
      dir="/root/${roomAnswer}";
      rock=/usr/share/wordlists/rockyou.txt
      medium=/usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt
      # Find the home IP
      home=$(hostname -I | cut -f1 -d " ")
      break;;
    * ) echo "Please answer [O]penVPN / [A]ttackBox."
  esac
done

## Creating shortcuts for easier commands
echo "- Creating shortcuts for easier commands"
export ip=$IPAnswer
export home=$home

export rock=$rock
export medium=$medium

## Creating room to use during hack
echo "- Creating room to use during hack"

if [ -d $dir ]
then
  echo "Directory exists"
else
  echo "Creating directory ${dir}"
  mkdir -p $dir
fi

[ ! -d ${dir}/nmap ] && mkdir -p ${dir}/nmap
[ ! -d ${dir}/gobuster ] && mkdir -p ${dir}/gobuster
[ ! -d ${dir}/nikto ] && mkdir -p ${dir}/nikto
[ ! -d ${dir}/enum4linux ] && mkdir -p ${dir}/enum4linux
